<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="最近在 MacOSX 上安装 flutter 也遇到一些问题。不是 MacOS Mojave 的问题，而是 flutter 依赖的一个开源库，它的依赖树出现版本不兼容问题。 运行 flutter doctor 出现如下提示。 [!] iOS toolchain - develop for iOS devices"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="MacOS 下安装 flutter 遇到的一个依赖问题"><meta property="og:description" content="最近在 MacOSX 上安装 flutter 也遇到一些问题。不是 MacOS Mojave 的问题，而是 flutter 依赖的一个开源库，它的依赖树出现版本不兼容问题。 运行 flutter doctor 出现如下提示。 [!] iOS toolchain - develop for iOS devices"><meta property="og:type" content="article"><meta property="og:url" content="http://i.am.simonkuang.org/posts/2018/10/19/MacOS-%E4%B8%8B%E5%AE%89%E8%A3%85-flutter-%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/"><meta property="article:published_time" content="2018-10-19T13:41:54+00:00"><meta property="article:modified_time" content="2018-10-19T13:41:54+00:00"><title>MacOS 下安装 flutter 遇到的一个依赖问题 | 流沙书斋</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.90625d9fbb472b5f34fb5ba5842114a94d178eb68035d6dd2a9154e8b9bb1849.css integrity="sha256-kGJdn7tHK180+1ulhCEUqU0XjraANdbdKpFU6Lm7GEk="><script defer src=/en.search.min.bf8f257b7508161e115cfb596478cbb6de138c1c963ae8ff3ac42368dd0a92e3.js integrity="sha256-v48le3UIFh4RXPtZZHjLtt4TjByWOuj/OsQjaN0KkuM="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script defer src=/custom.min.85e1dbc39b23671ffbf52bcb831b12735ade63896b28278cfb69b35d2c870ee9.js integrity="sha256-heHbw5sjZx/79SvLgxsSc1reY4lrKCeM+2mzXSyHDuk="></script><script src=//kit.fontawesome.com/e81509d074.js crossorigin=anonymous></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>流沙书斋</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/><i class="menu-item-icon fa fa-fw fa-home"></i>首页</a></li><li><a href=/posts/><i class="menu-item-icon fa fa-fw fa-blog"></i>博客</a></li><li><a href=/topics/><i class="menu-item-icon fa fa-fw fa-book"></i>专栏</a></li></ul><ul><li><a href=https://github.com/simonkuang target=_blank rel=noopener><i class="menu-item-icon fa fa-fw fa-github"></i>Github</a></li><li><a href=https://www.zhihu.com/people/simonkuang target=_blank rel=noopener><i class="menu-item-icon fab fa-fw fa-zhihu"></i>知乎</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>MacOS 下安装 flutter 遇到的一个依赖问题</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class=markdown><h1><a href=/posts/2018/10/19/MacOS-%E4%B8%8B%E5%AE%89%E8%A3%85-flutter-%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/>MacOS 下安装 flutter 遇到的一个依赖问题</a></h1><h5>2018-10-19</h5><div><a href=/tags/%E6%8A%80%E6%9C%AF/ class=tags>技术</a></div><p><p>最近在 MacOSX 上安装 flutter 也遇到一些问题。不是 MacOS Mojave 的问题，而是 flutter 依赖的一个开源库，它的依赖树出现版本不兼容问题。</p><p>运行 <code>flutter doctor</code> 出现如下提示。</p><blockquote><p>[!] iOS toolchain - develop for iOS devices (Xcode 10.0)
✗ libimobiledevice and ideviceinstaller are not installed. To install, run:
brew install &ndash;HEAD libimobiledevice
brew install ideviceinstaller
✗ ios-deploy not installed. To install:
brew install ios-deploy
✗ CocoaPods not installed.
CocoaPods is used to retrieve the iOS platform side&rsquo;s plugin code that responds to your plugin usage on the Dart side.
Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS.
For more info, see <a href=https://flutter.io/platform-plugins>https://flutter.io/platform-plugins</a>
To install:
brew install cocoapods
pod setup</p></blockquote><p>按照提示，运行 <code>brew install --HEAD libimobiledevice</code> 出现如下提示。</p><blockquote><p>checking for libusbmuxd >= 1.1.0&mldr; no
configure: error: Package requirements (libusbmuxd >= 1.1.0) were not met:</p><p>Requested &lsquo;libusbmuxd >= 1.1.0&rsquo; but version of libusbmuxd is 1.0.10</p><p>Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.</p><p>Alternatively, you may set the environment variables libusbmuxd_CFLAGS
and libusbmuxd_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.</p><p>READ THIS: <a href=https://docs.brew.sh/Troubleshooting>https://docs.brew.sh/Troubleshooting</a></p></blockquote><p>brew 发现 usbmuxd 这个库最高版本就是 1.0.10，github 上最新 release 版本也是 1.0.10。压根儿就没有 1.1.0 这个版本存在。</p><p>不过细看，发现 usbmuxd 这个库的最新版本，就是这个 1.0.10 是 2014 年发布的，算是老古董了。</p><p>所以安装 usbmuxd 的 head 版本试试。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew unlink usbmuxd  <span style=color:#75715e># 否则会 reinstall 失败</span>
brew reinstall --HEAD usbmuxd  <span style=color:#75715e># 直接从 github 的 master HEAD 安装</span>

brew install --HEAD libimobiledevice
</code></pre></div><p>然后，就成了。囧rz&mldr;</p><p>依赖树的问题，万一遇到，还是得手动一个一个解决。没办法。</p><p>一个结论就是，要用 <code>brew install —HEAD</code>，就要忍受 nightly 的不稳定，这是必然付出的代价。flutter 现在还是 beta 版本，依赖 nightly 的开源库也情有可原。遇到问题，就自己撸起手解决吧。</p></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents></nav></aside></main></body></html>